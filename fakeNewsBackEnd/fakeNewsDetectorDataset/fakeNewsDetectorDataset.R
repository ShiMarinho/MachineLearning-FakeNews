#src: https://journal.r-project.org/archive/2013/RJ-2013-001/RJ-2013-001.pdf
#article: RTextTools: A Supervised Learning Package for Text Classification
#libraries

library(RTextTools)
library(tidytext)
library(stringr)
library(tm)

# LOAD train and test fake news dataset 

data <- read.csv("~/Downloads/fake-news-detection/data.csv")
View(data)
#------------------------------Step 1---------------------------------------------
# 1.a PREPROCESS - data preparation, importing, cleaning and general preprocessing
# removing: numbers, punctuation, sparseTerms(basically 0s), stop words(the, and, it)
# mutating all text to lower case
data$Body = tolower(data$Body)
# 1.b CREATING THE DOCUMENT-TERM MATRIX

matrix <- create_matrix(data$Body ,language="english", 
                        removeNumbers=TRUE, stemWords=FALSE, removePunctuation = TRUE, removeSparseTerms = .998, 
                        removeStopwords = TRUE, stripWhitespace = TRUE)


#------------------------------Step 2---------------------------------------------
# 2. CREATING A CONTAINER to output a matrix_container within train and test sparse matrices, corresponding
# vectors of train and test codes, and character vector of trm label names.
dim(data)
#output 
#[1] 4009    4

container <- create_container(matrix,data$Label, trainSize = 1:3207, testSize = 3208:4009, virgin=FALSE)
str(container)
# #output 
# Formal class 'matrix_container' [package "RTextTools"] with 6 slots
# ..@ training_matrix      :Formal class 'matrix.csr' [package "SparseM"] with 4 slots
# .. .. ..@ ra       : num [1:512872] 1 1 1 1 1 1 3 1 1 1 ...
# .. .. ..@ ja       : int [1:512872] 146 147 175 202 227 232 278 295 300 305 ...
# .. .. ..@ ia       : int [1:3208] 1 382 564 963 1012 1033 1076 1449 1575 1749 ...
# .. .. ..@ dimension: int [1:2] 3207 10756
# ..@ classification_matrix:Formal class 'matrix.csr' [package "SparseM"] with 4 slots
# .. .. ..@ ra       : num [1:126922] 2 1 1 1 1 1 1 2 1 1 ...
# .. .. ..@ ja       : int [1:126922] 210 330 456 561 856 886 905 914 964 1001 ...
# .. .. ..@ ia       : int [1:803] 1 107 272 455 707 813 1069 1175 1592 1841 ...
# .. .. ..@ dimension: int [1:2] 802 10756
# ..@ training_codes       : Factor w/ 2 levels "0","1": 2 2 2 2 2 1 2 2 2 2 ...
# ..@ testing_codes        : Factor w/ 2 levels "0","1": 1 2 1 1 1 1 2 2 2 1 ...
# ..@ column_names         : chr [1:10756] "–" "–jeana" "—" "———" ...
# ..@ virgin               : logi FALSE

summary(container)
#output
# Length            Class             Mode 
#     1 matrix_container               S4 


#------------------------------Step 3---------------------------------------------
#3. Training models
RF <- train_model(container,"RF")
#output
# Call:
#   randomForest(x = as.matrix(container@training_matrix), y = container@training_codes,      ntree = ntree) 
# Type of random forest: classification
# Number of trees: 200
# No. of variables tried at each split: 103
# 
# OOB estimate of  error rate: 2.99%
# Confusion matrix:
#   0    1 class.error
# 0 1626   82  0.04800937
# 1   14 1485  0.00933956




#------------------------------Step 4---------------------------------------------
#4. Classifying data using trained models
RF_CLASSIFY <- classify_model(container, RF)
# output
# FORESTS_LABEL FORESTS_PROB
# 1               0        0.905
# 2               1        0.845
# 3               0        0.850
# 4               0        0.855
# 5               0        0.975
# 6               0        0.775
# 7               1        0.635
# 8               1        0.820
# 9               1        0.920
# 10              0        0.640
# 11              0        0.870
# 12              1        0.840
# 13              1        0.550
# 14              1        0.875
# 15              0        1.000
# 16              0        0.940
# 17              1        0.910
# 18              0        1.000
# 19              1        0.960
# 20              0        0.945
# 21              1        0.885
# 22              1        0.975
# 23              1        0.965
# 24              1        0.940
# 25              1        0.770
# 26              0        1.000
# 27              1        0.775
# 28              0        1.000
# 29              1        0.905
# 30              1        0.670
# 31              1        0.860
# 32              0        1.000
# 33              1        0.815
# 34              0        0.955
# 35              1        0.920
# 36              1        0.830
# 37              0        0.990
# 38              0        0.800
# 39              0        1.000
# 40              1        0.585
# 41              1        0.985
# 42              1        0.865
# 43              0        0.975
# 44              0        0.895
# 45              0        0.585
# 46              0        0.955
# 47              0        0.865
# 48              1        0.920
# 49              1        0.865
# 50              1        0.745
# 51              1        0.930
# 52              1        0.775
# 53              0        0.615
# 54              0        1.000
# 55              0        1.000
# 56              1        0.980
# 57              0        0.940
# 58              0        0.990
# 59              1        0.950
# 60              0        0.860
# 61              1        0.915
# 62              0        1.000
# 63              1        0.965
# 64              1        0.720
# 65              1        0.950
# 66              0        0.935
# 67              0        1.000
# 68              1        0.805
# 69              0        0.975
# 70              1        0.905
# 71              0        0.985
# 72              0        1.000
# 73              0        0.775
# 74              1        0.810
# 75              1        0.765
# 76              1        0.940
# 77              0        0.995
# 78              1        0.600
# 79              1        0.875
# 80              0        0.975
# 81              1        0.880
# 82              1        0.845
# 83              1        0.745
# 84              1        0.935
# 85              1        0.900
# 86              1        0.965
# 87              1        0.860
# 88              0        1.000
# 89              1        0.715
# 90              0        1.000
# 91              0        1.000
# 92              1        0.795
# 93              1        0.915
# 94              1        0.805
# 95              0        1.000
# 96              1        0.975
# 97              1        0.805
# 98              0        0.905
# 99              0        0.990
# 100             1        0.910
# 101             0        1.000
# 102             1        0.780
# 103             0        0.660
# 104             1        0.870
# 105             1        0.595
# 106             0        0.945
# 107             0        0.785
# 108             0        1.000
# 109             1        0.945
# 110             1        0.520
# 111             1        0.705
# 112             1        0.935
# 113             1        0.845
# 114             1        0.910
# 115             1        0.645
# 116             0        0.975
# 117             0        0.850
# 118             1        0.890
# 119             0        1.000
# 120             0        1.000
# 121             0        0.960
# 122             0        0.970
# 123             0        1.000
# 124             1        1.000
# 125             0        1.000
# 126             0        0.955
# 127             1        0.670
# 128             0        0.975
# 129             0        1.000
# 130             0        0.870
# 131             1        0.815
# 132             1        0.600
# 133             1        0.970
# 134             1        1.000
# 135             0        1.000
# 136             0        0.970
# 137             1        0.955
# 138             1        0.875
# 139             1        0.840
# 140             0        0.760
# 141             0        0.985
# 142             0        1.000
# 143             0        1.000
# 144             1        0.675
# 145             1        0.985
# 146             0        1.000
# 147             0        0.985
# 148             0        1.000
# 149             0        0.955
# 150             0        0.660
# 151             0        1.000
# 152             1        0.580
# 153             0        0.640
# 154             1        0.935
# 155             1        0.930
# 156             0        0.585
# 157             0        1.000
# 158             0        0.985
# 159             0        1.000
# 160             0        0.995
# 161             1        0.560
# 162             1        0.555
# 163             1        0.795
# 164             0        0.875
# 165             0        0.885
# 166             0        0.970
# 167             0        1.000
# 168             1        0.520
# 169             1        0.965
# 170             0        1.000
# 171             1        0.520
# 172             1        0.960
# 173             1        0.815
# 174             0        0.865
# 175             0        1.000
# 176             1        0.895
# 177             1        0.540
# 178             0        0.930
# 179             1        0.895
# 180             1        0.825
# 181             1        0.795
# 182             0        0.920
# 183             1        0.820
# 184             1        0.830
# 185             1        0.930
# 186             0        0.965
# 187             0        0.970
# 188             1        0.980
# 189             1        0.900
# 190             0        0.875
# 191             1        0.890
# 192             0        1.000
# 193             1        0.875
# 194             1        0.905
# 195             1        0.890
# 196             1        0.675
# 197             1        0.860
# 198             0        0.955
# 199             1        0.860
# 200             1        0.980
# 201             1        0.930
# 202             0        0.940
# 203             1        0.935
# 204             0        0.970
# 205             1        0.930
# 206             1        0.915
# 207             1        0.810
# 208             1        1.000
# 209             1        0.880
# 210             0        1.000
# 211             0        0.990
# 212             0        1.000
# 213             1        0.930
# 214             1        0.970
# 215             0        0.900
# 216             1        0.965
# 217             0        0.900
# 218             0        1.000
# 219             0        0.845
# 220             0        0.975
# 221             0        0.890
# 222             0        0.930
# 223             0        0.890
# 224             1        0.965
# 225             1        0.895
# 226             1        0.970
# 227             1        0.935
# 228             1        0.790
# 229             1        0.805
# 230             0        0.985
# 231             0        0.935
# 232             1        0.980
# 233             0        0.995
# 234             1        0.785
# 235             1        0.935
# 236             1        0.780
# 237             1        0.935
# 238             0        1.000
# 239             1        0.880
# 240             1        0.950
# 241             1        0.745
# 242             0        0.500
# 243             1        0.705
# 244             0        0.910
# 245             1        0.665
# 246             1        0.995
# 247             0        0.920
# 248             0        0.965
# 249             0        0.970
# 250             1        0.935
# 251             1        0.955
# 252             0        0.885
# 253             1        0.975
# 254             1        0.900
# 255             1        0.925
# 256             0        0.995
# 257             0        0.800
# 258             0        0.685
# 259             1        0.770
# 260             0        0.960
# 261             0        1.000
# 262             0        1.000
# 263             1        0.950
# 264             0        0.930
# 265             0        0.810
# 266             0        0.970
# 267             0        1.000
# 268             1        0.920
# 269             1        0.880
# 270             0        0.980
# 271             1        0.955
# 272             0        0.865
# 273             1        0.825
# 274             0        1.000
# 275             1        0.950
# 276             0        1.000
# 277             0        1.000
# 278             0        0.545
# 279             0        1.000
# 280             0        0.925
# 281             0        1.000
# 282             1        0.855
# 283             0        1.000
# 284             0        1.000
# 285             0        0.870
# 286             1        0.925
# 287             1        0.595
# 288             1        0.870
# 289             1        0.945
# 290             1        0.945
# 291             1        0.945
# 292             0        0.930
# 293             1        0.670
# 294             1        0.820
# 295             0        0.540
# 296             0        0.825
# 297             0        0.730
# 298             1        0.510
# 299             0        0.995
# 300             1        0.940
# 301             0        0.995
# 302             1        0.815
# 303             1        0.940
# 304             1        0.755
# 305             0        0.835
# 306             1        0.955
# 307             1        0.970
# 308             0        0.975
# 309             0        0.685
# 310             0        0.910
# 311             0        0.990
# 312             0        0.955
# 313             0        0.970
# 314             1        0.825
# 315             0        0.875
# 316             0        0.875
# 317             1        0.845
# 318             0        0.855
# 319             0        1.000
# 320             0        0.985
# 321             1        0.810
# 322             1        0.895
# 323             0        0.980
# 324             0        0.910
# 325             0        0.990
# 326             1        0.840
# 327             1        0.965
# 328             1        0.930
# 329             0        0.990
# 330             0        0.560
# 331             1        0.970
# 332             0        0.930
# 333             0        1.000
# 334             1        0.945
# 335             1        0.785
# 336             0        0.955
# 337             1        0.925
# 338             0        0.960
# 339             0        0.945
# 340             1        0.880
# 341             0        1.000
# 342             1        0.835
# 343             0        0.980
# 344             0        0.610
# 345             1        0.695
# 346             0        0.740
# 347             0        0.945
# 348             0        0.690
# 349             0        1.000
# 350             0        1.000
# 351             0        0.950
# 352             1        0.870
# 353             1        0.895
# 354             0        0.990
# 355             0        0.660
# 356             0        1.000
# 357             0        1.000
# 358             0        0.915
# 359             0        0.640
# 360             0        1.000
# 361             0        0.885
# 362             1        0.920
# 363             0        0.975
# 364             1        0.905
# 365             1        0.760
# 366             0        0.905
# 367             1        0.945
# 368             0        0.980
# 369             0        0.985
# 370             0        0.985
# 371             1        0.990
# 372             1        0.870
# 373             0        0.915
# 374             1        0.875
# 375             0        0.985
# 376             0        1.000
# 377             1        0.865
# 378             0        1.000
# 379             0        1.000
# 380             1        0.900
# 381             0        0.870
# 382             0        1.000
# 383             0        0.970
# 384             0        1.000
# 385             1        0.820
# 386             0        1.000
# 387             0        0.980
# 388             1        0.840
# 389             0        1.000
# 390             0        0.940
# 391             0        1.000
# 392             0        0.980
# 393             1        0.940
# 394             1        0.830
# 395             0        0.990
# 396             0        0.625
# 397             0        0.990
# 398             1        0.975
# 399             1        0.875
# 400             0        0.945
# 401             0        0.885
# 402             1        0.810
# 403             0        0.830
# 404             0        1.000
# 405             0        0.770
# 406             0        0.585
# 407             1        0.595
# 408             0        1.000
# 409             1        0.820
# 410             1        0.920
# 411             0        1.000
# 412             0        1.000
# 413             1        0.600
# 414             0        0.945
# 415             1        0.930
# 416             0        0.760
# 417             1        0.910
# 418             1        0.740
# 419             1        0.875
# 420             0        0.805
# 421             1        0.775
# 422             1        0.855
# 423             1        0.800
# 424             0        1.000
# 425             0        0.930
# 426             1        0.960
# 427             1        0.835
# 428             0        0.605
# 429             1        0.835
# 430             0        0.795
# 431             1        0.845
# 432             1        0.775
# 433             0        1.000
# 434             0        1.000
# 435             0        0.760
# 436             0        0.905
# 437             1        0.915
# 438             1        0.850
# 439             0        0.905
# 440             1        0.875
# 441             1        0.890
# 442             0        0.980
# 443             1        1.000
# 444             1        0.780
# 445             0        0.905
# 446             1        0.790
# 447             0        0.565
# 448             1        0.740
# 449             0        0.620
# 450             0        0.850
# 451             0        0.935
# 452             0        1.000
# 453             0        0.915
# 454             1        0.930
# 455             1        0.865
# 456             0        0.615
# 457             1        0.890
# 458             0        1.000
# 459             1        0.965
# 460             1        0.855
# 461             1        0.610
# 462             1        0.785
# 463             1        0.785
# 464             0        0.760
# 465             1        0.910
# 466             0        0.990
# 467             0        0.990
# 468             1        0.825
# 469             0        0.575
# 470             0        1.000
# 471             1        0.565
# 472             1        0.555
# 473             1        0.810
# 474             0        0.980
# 475             1        0.840
# 476             1        1.000
# 477             0        0.945
# 478             0        0.960
# 479             0        0.980
# 480             0        0.640
# 481             1        0.950
# 482             0        0.845
# 483             1        0.925
# 484             0        0.960
# 485             1        0.950
# 486             0        1.000
# 487             1        0.950
# 488             0        0.955
# 489             1        0.795
# 490             0        0.800
# 491             0        0.875
# 492             0        0.670
# 493             0        0.665
# 494             1        0.850
# 495             1        0.885
# 496             1        0.790
# 497             1        0.730
# 498             0        0.920
# 499             1        0.840
# 500             1        0.905
# [ reached 'max' / getOption("max.print") -- omitted 302 rows ]


#------------------------------Step 5---------------------------------------------
#5. Analytics
analytics_rf <- create_analytics(container, RF_CLASSIFY)

#------------------------------Step 6---------------------------------------------
#6. Testing algorithm accurary
summary(analytics_rf)
#output
# ENSEMBLE SUMMARY
# 
# n-ENSEMBLE COVERAGE n-ENSEMBLE RECALL
# n >= 1                   1              0.97
# 
# 
# ALGORITHM PERFORMANCE
# 
# FORESTS_PRECISION    FORESTS_RECALL    FORESTS_FSCORE 
# 0.970             0.975             0.970

# CREATE THE data.frame SUMMARIES
topic_summary <- analytics_rf@label_summary
#output
# NUM_MANUALLY_CODED NUM_CONSENSUS_CODED NUM_PROBABILITY_CODED PCT_CONSENSUS_CODED
# 0                429                 413                   413             96.2704
# 1                373                 389                   389            104.2895
# PCT_PROBABILITY_CODED PCT_CORRECTLY_CODED_CONSENSUS PCT_CORRECTLY_CODED_PROBABILITY
# 0               96.2704                      95.57110                        95.57110
# 1              104.2895                      99.19571                        99.19571
# 

alg_summary <- analytics_rf@algorithm_summary
#output

ens_summary <-analytics_rf@ensemble_summary
#output
#FORESTS_PRECISION FORESTS_RECALL FORESTS_FSCORE
# 0              0.99           0.96           0.97
# 1              0.95           0.99           0.97


doc_summary <- analytics_rf@document_summary
#output
# FORESTS_LABEL FORESTS_PROB MANUAL_CODE CONSENSUS_CODE CONSENSUS_AGREE CONSENSUS_INCORRECT
# 1               0        0.905           0              0               1                   0
# 2               1        0.845           1              1               1                   0
# 3               0        0.850           0              0               1                   0
# 4               0        0.855           0              0               1                   0
# 5               0        0.975           0              0               1                   0
# 6               0        0.775           0              0               1                   0
# 7               1        0.635           1              1               1                   0
# 8               1        0.820           1              1               1                   0
# 9               1        0.920           1              1               1                   0
# 10              0        0.640           0              0               1                   0
# 11              0        0.870           0              0               1                   0
# 12              1        0.840           1              1               1                   0
# 13              1        0.550           0              1               1                   1
# 14              1        0.875           1              1               1                   0
# 15              0        1.000           0              0               1                   0
# 16              0        0.940           0              0               1                   0
# 17              1        0.910           1              1               1                   0
# 18              0        1.000           0              0               1                   0
# 19              1        0.960           1              1               1                   0
# 20              0        0.945           0              0               1                   0
# 21              1        0.885           1              1               1                   0
# 22              1        0.975           1              1               1                   0
# 23              1        0.965           1              1               1                   0
# 24              1        0.940           1              1               1                   0
# 25              1        0.770           1              1               1                   0
# 26              0        1.000           0              0               1                   0
# 27              1        0.775           1              1               1                   0
# 28              0        1.000           0              0               1                   0
# 29              1        0.905           1              1               1                   0
# 30              1        0.670           1              1               1                   0
# 31              1        0.860           1              1               1                   0
# 32              0        1.000           0              0               1                   0
# 33              1        0.815           1              1               1                   0
# 34              0        0.955           0              0               1                   0
# 35              1        0.920           1              1               1                   0
# 36              1        0.830           1              1               1                   0
# 37              0        0.990           0              0               1                   0
# 38              0        0.800           0              0               1                   0
# 39              0        1.000           0              0               1                   0
# 40              1        0.585           0              1               1                   1
# 41              1        0.985           1              1               1                   0
# 42              1        0.865           1              1               1                   0
# 43              0        0.975           0              0               1                   0
# 44              0        0.895           0              0               1                   0
# 45              0        0.585           0              0               1                   0
# 46              0        0.955           0              0               1                   0
# 47              0        0.865           0              0               1                   0
# 48              1        0.920           1              1               1                   0
# 49              1        0.865           1              1               1                   0
# 50              1        0.745           1              1               1                   0
# 51              1        0.930           1              1               1                   0
# 52              1        0.775           1              1               1                   0
# 53              0        0.615           0              0               1                   0
# 54              0        1.000           0              0               1                   0
# 55              0        1.000           0              0               1                   0
# 56              1        0.980           1              1               1                   0
# 57              0        0.940           0              0               1                   0
# 58              0        0.990           0              0               1                   0
# 59              1        0.950           1              1               1                   0
# 60              0        0.860           0              0               1                   0
# 61              1        0.915           1              1               1                   0
# 62              0        1.000           0              0               1                   0
# 63              1        0.965           1              1               1                   0
# 64              1        0.720           1              1               1                   0
# 65              1        0.950           1              1               1                   0
# 66              0        0.935           0              0               1                   0
# 67              0        1.000           0              0               1                   0
# 68              1        0.805           1              1               1                   0
# 69              0        0.975           0              0               1                   0
# 70              1        0.905           1              1               1                   0
# 71              0        0.985           0              0               1                   0
# 72              0        1.000           0              0               1                   0
# 73              0        0.775           0              0               1                   0
# 74              1        0.810           1              1               1                   0
# 75              1        0.765           1              1               1                   0
# 76              1        0.940           1              1               1                   0
# 77              0        0.995           0              0               1                   0
# 78              1        0.600           0              1               1                   1
# 79              1        0.875           1              1               1                   0
# 80              0        0.975           0              0               1                   0
# 81              1        0.880           1              1               1                   0
# 82              1        0.845           1              1               1                   0
# 83              1        0.745           1              1               1                   0
# 84              1        0.935           1              1               1                   0
# 85              1        0.900           1              1               1                   0
# 86              1        0.965           1              1               1                   0
# 87              1        0.860           1              1               1                   0
# 88              0        1.000           0              0               1                   0
# 89              1        0.715           1              1               1                   0
# 90              0        1.000           0              0               1                   0
# 91              0        1.000           0              0               1                   0
# 92              1        0.795           1              1               1                   0
# 93              1        0.915           1              1               1                   0
# 94              1        0.805           1              1               1                   0
# 95              0        1.000           0              0               1                   0
# 96              1        0.975           1              1               1                   0
# 97              1        0.805           1              1               1                   0
# 98              0        0.905           0              0               1                   0
# 99              0        0.990           0              0               1                   0
# 100             1        0.910           1              1               1                   0
# 101             0        1.000           0              0               1                   0
# 102             1        0.780           1              1               1                   0
# 103             0        0.660           0              0               1                   0
# 104             1        0.870           1              1               1                   0
# 105             1        0.595           1              1               1                   0
# 106             0        0.945           0              0               1                   0
# 107             0        0.785           0              0               1                   0
# 108             0        1.000           0              0               1                   0
# 109             1        0.945           1              1               1                   0
# 110             1        0.520           0              1               1                   1
# 111             1        0.705           1              1               1                   0
# 112             1        0.935           1              1               1                   0
# 113             1        0.845           1              1               1                   0
# 114             1        0.910           1              1               1                   0
# 115             1        0.645           1              1               1                   0
# 116             0        0.975           0              0               1                   0
# 117             0        0.850           0              0               1                   0
# 118             1        0.890           1              1               1                   0
# 119             0        1.000           0              0               1                   0
# 120             0        1.000           0              0               1                   0
# 121             0        0.960           0              0               1                   0
# 122             0        0.970           0              0               1                   0
# 123             0        1.000           0              0               1                   0
# 124             1        1.000           1              1               1                   0
# 125             0        1.000           0              0               1                   0
# PROBABILITY_CODE PROBABILITY_INCORRECT
# 1                  0                     0
# 2                  1                     0
# 3                  0                     0
# 4                  0                     0
# 5                  0                     0
# 6                  0                     0
# 7                  1                     0
# 8                  1                     0
# 9                  1                     0
# 10                 0                     0
# 11                 0                     0
# 12                 1                     0
# 13                 1                     1
# 14                 1                     0
# 15                 0                     0
# 16                 0                     0
# 17                 1                     0
# 18                 0                     0
# 19                 1                     0
# 20                 0                     0
# 21                 1                     0
# 22                 1                     0
# 23                 1                     0
# 24                 1                     0
# 25                 1                     0
# 26                 0                     0
# 27                 1                     0
# 28                 0                     0
# 29                 1                     0
# 30                 1                     0
# 31                 1                     0
# 32                 0                     0
# 33                 1                     0
# 34                 0                     0
# 35                 1                     0
# 36                 1                     0
# 37                 0                     0
# 38                 0                     0
# 39                 0                     0
# 40                 1                     1
# 41                 1                     0
# 42                 1                     0
# 43                 0                     0
# 44                 0                     0
# 45                 0                     0
# 46                 0                     0
# 47                 0                     0
# 48                 1                     0
# 49                 1                     0
# 50                 1                     0
# 51                 1                     0
# 52                 1                     0
# 53                 0                     0
# 54                 0                     0
# 55                 0                     0
# 56                 1                     0
# 57                 0                     0
# 58                 0                     0
# 59                 1                     0
# 60                 0                     0
# 61                 1                     0
# 62                 0                     0
# 63                 1                     0
# 64                 1                     0
# 65                 1                     0
# 66                 0                     0
# 67                 0                     0
# 68                 1                     0
# 69                 0                     0
# 70                 1                     0
# 71                 0                     0
# 72                 0                     0
# 73                 0                     0
# 74                 1                     0
# 75                 1                     0
# 76                 1                     0
# 77                 0                     0
# 78                 1                     1
# 79                 1                     0
# 80                 0                     0
# 81                 1                     0
# 82                 1                     0
# 83                 1                     0
# 84                 1                     0
# 85                 1                     0
# 86                 1                     0
# 87                 1                     0
# 88                 0                     0
# 89                 1                     0
# 90                 0                     0
# 91                 0                     0
# 92                 1                     0
# 93                 1                     0
# 94                 1                     0
# 95                 0                     0
# 96                 1                     0
# 97                 1                     0
# 98                 0                     0
# 99                 0                     0
# 100                1                     0
# 101                0                     0
# 102                1                     0
# 103                0                     0
# 104                1                     0
# 105                1                     0
# 106                0                     0
# 107                0                     0
# 108                0                     0
# 109                1                     0
# 110                1                     1
# 111                1                     0
# 112                1                     0
# 113                1                     0
# 114                1                     0
# 115                1                     0
# 116                0                     0
# 117                0                     0
# 118                1                     0
# 119                0                     0
# 120                0                     0
# 121                0                     0
# 122                0                     0
# 123                0                     0
# 124                1                     0
# 125                0                     0
# [ reached 'max' / getOption("max.print") -- omitted 677 rows ]


#------------------------------Step 7---------------------------------------------
#7 Ensemble agreement
create_ensembleSummary(analytics_rf@document_summary)
#output
# n-ENSEMBLE COVERAGE n-ENSEMBLE RECALL
# n >= 1                   1              0.97
